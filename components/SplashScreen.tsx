import React, { useEffect, useRef, useState } from 'react';
import { View, StyleSheet, Animated, Dimensions, Text, StatusBar } from 'react-native';
import Svg, { Path } from 'react-native-svg';

const { width, height } = Dimensions.get('window');

interface SplashScreen {
  onFinish: () => void
}

const AnimatedSvg = Animated.createAnimatedComponent(Svg);

export default function PetiskoSplashScreen({ onFinish }: SplashScreen) {
  const fadeAnim = useRef(new Animated.Value(0)).current
  const scaleAnim = useRef(new Animated.Value(0.3)).current
  const logoFadeAnim = useRef(new Animated.Value(0)).current
  const pawBounceAnim = useRef(new Animated.Value(0)).current
  const rotateAnim = useRef(new Animated.Value(0)).current

  useEffect(() => {
    Animated.sequence([

      Animated.timing(fadeAnim, {
        toValue: 1,
        duration: 600,
        useNativeDriver: true,
      }),
      
      Animated.parallel([
        Animated.timing(logoFadeAnim, {
          toValue: 1,
          duration: 1000,
          useNativeDriver: true,
        }),
        Animated.spring(scaleAnim, {
          toValue: 1,
          tension: 80,
          friction: 6,
          useNativeDriver: true,
        }),
        Animated.spring(pawBounceAnim, {
          toValue: 1,
          tension: 120,
          friction: 8,
          useNativeDriver: true,
        }),
        Animated.timing(rotateAnim, {
          toValue: 1,
          duration: 1200,
          useNativeDriver: true,
        }),
      ]),
       
      Animated.delay(500),
      
      Animated.parallel([
        Animated.timing(fadeAnim, {
          toValue: 0,
          duration: 600,
          useNativeDriver: true,
        }),
        Animated.timing(scaleAnim, {
          toValue: 1.2,
          duration: 600,
          useNativeDriver: true,
        }),
      ]),
    ]).start(() => {
      onFinish();
    });
  }, []);

  const bounceScale = pawBounceAnim.interpolate({
    inputRange: [0, 0.5, 1],
    outputRange: [0.8, 1.1, 1],
  });

  const spin = rotateAnim.interpolate({
    inputRange: [0, 1],
    outputRange: ['0deg', '5deg'],
  });

  const PawSVG = () => {
      return (
        <AnimatedSvg
          style={[
            styles.svgLogo,
            {
              transform: [
                { scale: bounceScale },
                { rotate: spin },
              ],
            },
          ]}
          width={180}
          height={160}
          viewBox="0 0 274.88904 241.312"
        >
          <Path
            d="m 705.31613,234.3345 c -8.77665,-1.16692 -19.92201,-6.24971 -26.5,-12.08523 -9.93963,-8.81771 -14.08116,-20.20087 -14.42819,-39.65641 -0.2807,-15.7371 -1.27136,-17.7497 -12.74388,-25.89001 -14.18619,-10.06579 -22.67724,-22.54407 -26.9516,-39.60755 -1.7348,-6.92542 -2.02657,-10.42045 -1.62791,-19.500001 0.60208,-13.71222 3.01312,-20.49894 9.99719,-28.14063 7.10482,-7.7738 13.05671,-10.33782 27.45314,-11.82656 6.49069,-0.6712 12.85185,-1.7909 14.13591,-2.48822 3.10483,-1.68609 4.59845,-5.55764 6.99006,-18.118635 2.4624,-12.93275 5.13869,-20.208 10.24882,-27.8604897 4.19804,-6.28661 7.69849,-9.38938003 14.92646,-13.23068 3.83672,-2.03902 5.90026,-2.39122 14,-2.38948 8.39497,0.002 10.09886,0.31733 14.64844,2.71262 3.13741,1.6518 7.78202,5.64151 11.89069,10.21407 11.06242,12.3114397 14.85228,12.3192797 25.87366,0.0535 9.08504,-10.11081 14.98619,-12.99133 26.58721,-12.978 9.88327,0.0114 15.1995,1.96535 21.95702,8.07036 8.90597,8.04601 13.5088,17.7587297 16.90425,35.6707297 3.41343,18.006865 4.85649,19.401095 21.39986,20.675845 7.58219,0.58424 12.78724,1.54013 15.99782,2.93795 9.65187,4.20221 18.05804,14.87192 20.68116,26.25 1.70342,7.38879 1.26003,21.773581 -0.93936,30.475381 -4.28561,16.95586 -12.5485,28.84375 -27.16949,39.08894 -11.28,7.9041 -12.29362,9.96667 -12.44373,25.32102 -0.18505,18.92896 -3.69169,29.42402 -12.91533,38.65445 -13.31165,13.32144 -30.65563,16.77378 -61.94338,12.32991 -17.46778,-2.48099 -24.24587,-2.47738 -42.88757,0.0228 -13.65658,1.8316 -25.59372,2.29779 -33.14125,1.2943 z m 35,-5.88589 c 13.33186,-2.16284 27.4153,-2.09674 42,0.19709 6.64245,1.04471 17.13432,1.88733 23.5,1.88733 19.55624,0 31.57214,-5.58176 39.96301,-18.56406 5.47186,-8.46603 7.13701,-16.43855 6.80631,-32.58765 l -0.26932,-13.15171 3.00632,-4.28962 c 1.65348,-2.35929 6.73139,-6.93626 11.28425,-10.17104 12.78328,-9.08244 19.96159,-19.52017 24.29999,-35.33375 3.06445,-11.17003 2.48724,-28.481841 -1.21524,-36.447801 -3.53803,-7.61212 -7.99394,-12.37605 -14.59805,-15.60714 -4.81834,-2.3574 -7.24806,-2.81431 -17.6816,-3.32505 -13.94103,-0.68245 -16.29516,-1.70424 -19.58536,-8.50088 -1.14834,-2.37216 -2.52436,-7.17239 -3.05782,-10.667155 -2.8214,-18.48364 -7.81274,-30.7053 -15.39411,-37.6935597 -4.92058,-4.53564003 -13.79137,-8.16058 -19.97017,-8.16058 -9.16663,0 -17.92535,4.86368997 -24.79576,13.76902 -4.30224,5.5765097 -9.98442,9.1649197 -14.58229,9.2090197 -4.05852,0.0389 -9.56088,-3.69712 -15.93451,-10.8193697 -7.14643,-7.98580003 -12.2844,-10.87669 -20.93883,-11.78125 -10.99475,-1.14918 -21.0538,3.96948997 -27.81333,14.1531597 -4.7032,7.08567 -7.07455,14.14214 -9.48198,28.21574 -2.07719,12.143055 -3.8328,16.269055 -8.36069,19.649145 -2.37784,1.77507 -4.72607,2.19283 -15,2.6686 -10.50729,0.48657 -12.86777,0.92082 -17.18082,3.16071 -9.37467,4.86852 -14.43253,12.22087 -17.1117,24.87439 -3.37252,15.928151 1.93123,37.269811 12.6239,50.797051 2.18388,2.76281 8.33237,8.3039 13.66333,12.31354 13.19812,9.92685 13.91845,11.42102 13.51494,28.03358 -0.44521,18.32978 2.10196,27.14995 10.63599,36.82953 4.67162,5.2987 13.42507,10.28095 21.80762,12.41234 7.15685,1.81974 25.00794,1.34078 39.86592,-1.06963 z m -36.66363,-8.26616 c -13.75617,-4.56514 -20.90938,-12.72866 -24.42795,-27.8781 -1.28899,-5.54983 -1.37672,-8.12425 -0.48634,-14.27132 1.70504,-11.77131 6.27254,-19.92361 18.36096,-32.77156 7.21612,-7.66952 12.04408,-13.95756 16.43775,-21.40891 14.16999,-24.031281 33.88715,-33.576131 58.5596,-28.348041 14.63217,3.10056 24.5976,11.326981 35.45762,29.270101 5.19745,8.58734 9.91284,14.74974 16.72591,21.85859 12.82423,13.38099 16.62814,20.83183 17.31221,33.90992 0.82414,15.75603 -4.58296,28.19924 -15.35398,35.33367 -6.86021,4.54401 -11.51341,5.66086 -23.42215,5.62171 -8.25807,-0.0271 -12.95545,-0.66164 -22,-2.97165 -15.20186,-3.8826 -26.11136,-3.90203 -41,-0.073 -14.15693,3.64083 -28.35632,4.31956 -36.16363,1.72861 z m -3.1267,-38.66282 c 0.38548,-9.03688 3.91661,-15.9126 15.51383,-30.20814 3.22216,-3.97185 9.64532,-12.74685 14.2737,-19.5 7.10428,-10.36569 8.20332,-12.49162 7.05497,-13.64678 -1.92472,-1.93616 -2.86595,-1.0711 -9.45734,8.69203 -3.2217,4.77196 -10.25516,14.30129 -15.62991,21.17629 -10.92345,13.97251 -15.32486,22.24281 -16.16387,30.37208 -0.66794,6.4717 0.0361,8.90222 2.44441,8.43842 1.35291,-0.26054 1.79991,-1.47212 1.96421,-5.3239 z m 140.64159,21.98638 c -0.36863,-0.96062 -0.0475,-2.0513 0.75302,-2.55765 1.98156,-1.25337 3.39572,-0.56443 3.39572,1.65431 0,2.41553 -3.29329,3.13261 -4.14874,0.90334 z M 672.81613,193.6997 c 0,-2.07545 1.18357,-2.75921 2.65799,-1.53555 1.93838,1.60871 1.64935,2.86888 -0.65799,2.86888 -1.1,0 -2,-0.6 -2,-1.33333 z m 0.57341,-34.23612 c -1.8095,-1.80949 -0.52486,-5.43055 1.92659,-5.43055 2.22122,0 3.89881,3.81454 2.44695,5.56392 -1.52472,1.83718 -2.43062,1.80955 -4.37354,-0.13337 z m 176.76242,-6.99777 c -0.33077,-0.86197 -0.16689,-2.00172 0.36417,-2.53278 1.4359,-1.4359 4.3,0.0341 4.3,2.20699 0,2.34355 -3.78834,2.60816 -4.66417,0.32579 z M 663.5985,143.09519 c -16.98961,-6.64186 -29.78237,-26.21413 -29.78237,-45.565521 0,-13.98621 6.13652,-23.59445 17.29536,-27.08017 4.98007,-1.55564 6.58139,-1.64544 11.38271,-0.63835 8.52231,1.78757 14.23321,4.98809 20.82193,11.66908 10.74287,10.8933 16.0524,24.075841 15.28973,37.961441 -0.66069,12.02905 -5.08044,19.35034 -14.28973,23.67085 -5.18634,2.43315 -14.46925,2.42539 -20.71763,-0.0173 z m 19.11885,-4.51108 c 3.92143,-2.02785 8.66115,-7.69503 10.11176,-12.0904 0.74228,-2.24914 1.05488,-6.94614 0.7936,-11.92422 -1.46353,-27.883931 -31.02466,-50.004061 -47.87583,-35.824731 -5.13222,4.31847 -7.2744,9.7494 -7.21365,18.28827 0.15773,22.171201 17.36403,42.959541 35.58256,42.990231 3.18981,0.005 7.06051,-0.64224 8.60156,-1.43915 z m 152.3556,3.9284 c -5.59104,-2.8275 -8.21334,-5.80217 -11.18277,-12.68549 -4.17006,-9.66643 -3.15844,-21.54529 2.91933,-34.280111 6.97541,-14.61567 22.33782,-25.83226 35.48607,-25.90954 10.55207,-0.062 18.59253,5.67817 22.52956,16.08412 4.02725,10.64442 1.42951,26.469081 -6.33854,38.612501 -11.13714,17.41016 -29.62516,25.15161 -43.41365,18.17852 z m 21.4751,-4.44445 c 2.32755,-1.05658 6.55843,-4.0842 9.40196,-6.72804 18.10252,-16.83129 21.4261,-43.716911 6.66851,-53.943931 -5.52105,-3.82609 -13.9116,-3.98569 -21.30239,-0.40519 -11.3006,5.47462 -21.99923,20.25123 -24.45077,33.770621 -1.6675,9.19571 0.91543,20.21459 5.76787,24.60599 5.54558,5.01868 16.16616,6.218 23.91482,2.70055 z m -148.14139,-28.6597 c -0.8482,-2.21039 1.71996,-4.8539 3.90207,-4.01655 1.0151,0.38954 1.52477,1.49782 1.32754,2.88675 -0.39875,2.80809 -4.26506,3.64336 -5.22961,1.1298 z m 101.99186,-4.69143 c -2.34853,-1.71729 -1.66556,-5.097571 1.11016,-5.494581 3.04774,-0.43593 4.88641,3.088861 2.73404,5.241231 -1.88775,1.88776 -1.63207,1.8709 -3.8442,0.25335 z M 718.7012,83.653409 c -21.09544,-7.53868 -32.26011,-41.323445 -20.96956,-63.454765 4.78586,-9.38105 13.88235,-14.7224197 23.8,-13.9751197 7.48494,0.564 12.34677,2.96938 18.3703,9.0886697 6.00897,6.10451 10.26777,14.42849 12.48811,24.40848 6.1613,27.693885 -12.18413,51.617675 -33.68885,43.932735 z M 707.86002,39.283034 c 0.0519,-6.79364 1.71041,-11.92802 5.42718,-16.80096 4.17028,-5.46752 1.35937,-9.09081 -3.24791,-4.18658 -6.72153,7.15474 -9.80065,26.737535 -4.20411,26.737535 1.73984,0 1.98629,-0.69987 2.02484,-5.749995 z m 48.62278,45.083325 c -0.36667,-0.36666 -0.66667,-1.71666 -0.66667,-3 0,-1.7944 0.55271,-2.33333 2.39301,-2.33333 2.96089,0 4.04104,2.4231 1.99307,4.47106 -1.66151,1.66151 -2.68329,1.89839 -3.71941,0.86227 z m 26.61409,-1.831 c -10.18391,-5.17186 -15.78076,-16.5219 -15.78076,-32.00233 0,-10.473145 1.44345,-16.394185 6.28606,-25.785435 8.04795,-15.6073397 23.758,-22.6995597 36.75218,-16.5915797 19.7084,9.2640397 22.06199,45.4248547 4.30841,66.1947747 -5.84667,6.84001 -11.57291,9.86668 -19.67148,10.39757 -5.75761,0.37742 -7.3926,0.0732 -11.89441,-2.213 z m 2.59874,-47.924895 c 1.42215,-3.43118 4.06041,-7.1183 7.18402,-10.04007 4.65211,-4.35151 5.76566,-6.37485 4.3097,-7.83081 -0.34474,-0.34473 -1.84105,10e-4 -3.32516,0.76859 -8.19259,4.23656 -18.12401,22.52486 -12.23207,22.52486 1.25506,0 2.5102,-1.67491 4.06351,-5.42257 z m -97.24002,42.728715 c -1.19516,-1.19516 -0.64571,-3.30615 0.86052,-3.30615 0.825,0 1.5,0.64844 1.5,1.44098 0,1.67065 -1.42728,2.79841 -2.36052,1.86517 z m 144.80667,-3.39328 c -1.03052,-1.66742 1.28721,-3.57951 2.66672,-2.2 1.15392,1.15392 0.43172,3.28713 -1.11287,3.28713 -0.48508,0 -1.18431,-0.48921 -1.55385,-1.08713 z"
            fill="#FF6B35"
            transform="translate(-622.90674,6.459402)"
          />
        </AnimatedSvg>
      );
  };

  return (
    <>
      <StatusBar barStyle="dark-content" backgroundColor="#FFF8F0" />
      <Animated.View style={[styles.container, { opacity: fadeAnim }]}>
        <Animated.View
          style={[
            styles.logoContainer,
            {
              opacity: logoFadeAnim,
              transform: [{ scale: scaleAnim }],
            },
          ]}
        >
          <Animated.View 
            style={[
              styles.pawBackground,
              {
                transform: [{ scale: bounceScale }],
              }
            ]} 
          />
          
          <PawSVG />
          
          <View
            style={styles.textContainer}
          >
            <Text style={styles.appName}>Petisko</Text>
            <Text style={styles.tagline}>Para seu melhor amigo üêæ</Text>
          </View>
        </Animated.View>

        <Animated.View 
          style={[
            styles.loadingContainer,
            {
              opacity: logoFadeAnim,
            }
          ]}
        >
        </Animated.View>
      </Animated.View>
    </>
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: '#FFF8F0',
    justifyContent: 'center',
    alignItems: 'center',
  },
  logoContainer: {
    alignItems: 'center',
    justifyContent: 'center',
  },
  pawBackground: {
    width: 200,
    height: 200,
    backgroundColor: 'rgba(255, 107, 53, 0.08)',
    borderRadius: 100,
    position: 'absolute',
    zIndex: -1,
  },
  svgLogo: {
    alignSelf: 'center',
    marginTop: 80,
    shadowColor: '#FF6B35',
    shadowOffset: {
      width: 0,
      height: 8,
    },
    shadowOpacity: 0.2,
    shadowRadius: 15,
    elevation: 10,
  },
  pawContainer: {
    marginBottom: 0,
  },
  pawPrint: {
    width: 120,
    height: 120,
    position: 'relative',
    alignItems: 'center',
    justifyContent: 'center',
  },
  mainPad: {
    width: 65,
    height: 80,
    backgroundColor: '#FF6B35',
    borderRadius: 32.5,
    position: 'absolute',
    bottom: 8,
    shadowColor: '#FF6B35',
    shadowOffset: {
      width: 0,
      height: 6,
    },
    shadowOpacity: 0.25,
    shadowRadius: 12,
    elevation: 10,
  },
  toe: {
    width: 26,
    height: 36,
    backgroundColor: '#FF6B35',
    borderRadius: 18,
    position: 'absolute',
    shadowColor: '#FF6B35',
    shadowOffset: {
      width: 0,
      height: 3,
    },
    shadowOpacity: 0.2,
    shadowRadius: 8,
    elevation: 6,
  },
  toe1: {
    top: 8,
    left: 32,
    transform: [{ rotate: '-12deg' }],
  },
  toe2: {
    top: 18,
    left: 12,
    transform: [{ rotate: '-30deg' }],
  },
  toe3: {
    top: 18,
    right: 12,
    transform: [{ rotate: '30deg' }],
  },
  toe4: {
    top: 8,
    right: 32,
    transform: [{ rotate: '12deg' }],
  },
  textContainer: {
    alignItems: 'center',
  },
  appName: {
    fontSize: 44,
    fontWeight: 'bold',
    color: '#FF6B35',
    textAlign: 'center',
    marginBottom: 8,
    letterSpacing: 2,
    textShadowColor: 'rgba(255, 107, 53, 0.2)',
    textShadowOffset: { width: 0, height: 2 },
    textShadowRadius: 4,
  },
  tagline: {
    fontSize: 16,
    color: '#8B5A3C',
    textAlign: 'center',
    fontStyle: 'italic',
    letterSpacing: 0.5,
  },
  loadingContainer: {
    position: 'absolute',
    bottom: height * 0.15,
    alignItems: 'center',
  },
  loadingDots: {
    flexDirection: 'row',
    alignItems: 'center',
  },
  dot: {
    width: 8,
    height: 8,
    backgroundColor: '#FF6B35',
    borderRadius: 4,
    marginHorizontal: 3,
    opacity: 0.6,
  },
});